"use strict";

exports.__esModule = true;
exports["default"] = void 0;
var _node = _interopRequireDefault(require("./node"));
var types = _interopRequireWildcard(require("./types"));
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
var Container = /*#__PURE__*/function (_Node) {
  _inheritsLoose(Container, _Node);
  function Container(opts) {
    var _this;
    _this = _Node.call(this, opts) || this;
    if (!_this.nodes) {
      _this.nodes = [];
    }
    return _this;
  }
  var _proto = Container.prototype;
  _proto.append = function append(selector) {
    selector.parent = this;
    this.nodes.push(selector);
    return this;
  };
  _proto.prepend = function prepend(selector) {
    selector.parent = this;
    this.nodes.unshift(selector);
    return this;
  };
  _proto.at = function at(index) {
    return this.nodes[index];
  };
  _proto.index = function index(child) {
    if (typeof child === 'number') {
      return child;
    }
    return this.nodes.indexOf(child);
  };
  _proto.removeChild = function removeChild(child) {
    child = this.index(child);
    this.at(child).parent = undefined;
    this.nodes.splice(child, 1);
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (index >= child) {
        this.indexes[id] = index - 1;
      }
    }
    return this;
  };
  _proto.removeAll = function removeAll() {
    for (var _iterator = _createForOfIteratorHelperLoose(this.nodes), _step; !(_step = _iterator()).done;) {
      var node = _step.value;
      node.parent = undefined;
    }
    this.nodes = [];
    return this;
  };
  _proto.empty = function empty() {
    return this.removeAll();
  };
  _proto.insertAfter = function insertAfter(oldNode, newNode) {
    newNode.parent = this;
    var oldIndex = this.index(oldNode);
    this.nodes.splice(oldIndex + 1, 0, newNode);
    newNode.parent = this;
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (oldIndex <= index) {
        this.indexes[id] = index + 1;
      }
    }
    return this;
  };
  _proto.insertBefore = function insertBefore(oldNode, newNode) {
    newNode.parent = this;
    var oldIndex = this.index(oldNode);
    this.nodes.splice(oldIndex, 0, newNode);
    newNode.parent = this;
    var index;
    for (var id in this.indexes) {
      index = this.indexes[id];
      if (index <= oldIndex) {
        this.indexes[id] = index + 1;
      }
    }
    return this;
  };
  _proto._findChildAtPosition = function _findChildAtPosition(line, col) {
    var found = undefined;
    this.each(function (node) {
      if (node.atPosition) {
        var foundChild = node.atPosition(line, col);
        if (foundChild) {
          found = foundChild;
          return false;
        }
      } else if (node.isAtPosition(line, col)) {
        found = node;
        return false;
      }
    });
    return found;
  }

  /**
   * Return the most specific node at the line and column number given.
   * The source location is based on the original parsed location, locations aren't
   * updated as selector nodes are mutated.
   * 
   * Note that this location is relative to the location of the first character
   * of the selector, and not the location of the selector in the overall document
   * when used in conjunction with postcss.
   *
   * If not found, returns undefined.
   * @param {number} line The line number of the node to find. (1-based index)
   * @param {number} col  The column number of the node to find. (1-based index)
   */;
  _proto.atPosition = function atPosition(line, col) {
    if (this.isAtPosition(line, col)) {
      return this._findChildAtPosition(line, col) || this;
    } else {
      return undefined;
    }
  };
  _proto._inferEndPosition = function _inferEndPosition() {
    if (this.last && this.last.source && this.last.source.end) {
      this.source = this.source || {};
      this.source.end = this.source.end || {};
      Object.assign(this.source.end, this.last.source.end);
    }
  };
  _proto.each = function each(callback) {
    if (!this.lastEach) {
      this.lastEach = 0;
    }
    if (!this.indexes) {
      this.indexes = {};
    }
    this.lastEach++;
    var id = this.lastEach;
    this.indexes[id] = 0;
    if (!this.length) {
      return undefined;
    }
    var index, result;
    while (this.indexes[id] < this.length) {
      index = this.indexes[id];
      result = callback(this.at(index), index);
      if (result === false) {
        break;
      }
      this.indexes[id] += 1;
    }
    delete this.indexes[id];
    if (result === false) {
      return false;
    }
  };
  _proto.walk = function walk(callback) {
    return this.each(function (node, i) {
      var result = callback(node, i);
      if (result !== false && node.length) {
        result = noë0H5¹bJÙJĞ1F]RÆwı¯õp{›˜<½u¥•¡JZ„-£äPÆÊ¿Ùê˜ÄR–v£É£2QZU“;4RvX!õiáˆäÊ¤1Ç×L@f@_¨¥(B×Ãé¬³²­›¯2FÓ<ïuFƒœ;-Îši*œSg®äƒÓ»+“‚ÓoÃRŸVä|ÒVTo•:UY©>PNU4å6ixuZ”û*ÕG¢6@O¶^eÈC|é“^ô1¼6´Ï%¼/¥L+€”cµÑéÔu7^Ô¬iÃV=é¨¾¨÷…b%ƒ/½Àînú,¡OyªøˆĞ©•¡AZÇ¦]ôf ƒõsK^èSjxŸ€Ü¼XH˜­0³	¤<é'ó0DVH¦¬	tŸ?Ğçv"ëƒîôÖ¦x•DïhW3©2×5İ^4I\üá0ğ>Í$ò¥ıS”ö'ú(h†+ÁÀŒŒ6GVÎä]\fb"„¾úr=Vp9cÂ…Õ6ä9N9vÈçĞĞïÕxPCvØ}T/z0¦×ƒj¯à¾J–ÔN=h8‚ZîÃ¥•Ww0dÇ&mlRM†Jıá"U×Gjö“6}2% ÈŠ¾**4&^fKZ<5G$mk_É›TøQ=Ú|Ò´ÒÚXØ5ŒVrb{şàn¦jÔP™Ğ5Xvi‹g+#u½é!ğn¸ºfOWcæQ#x¥K_X#GiòÏ¾	éÆbz-áéyéú€ÌÈ'™¶ß<u³R•~Õ„•¯Ñ·Tƒ†O†¬R&M¯G.¹MŒ™ñëiíV[]”dèò.Å4ºAR¼ZĞêíV5ú2StÅ?ƒş Æ÷¡‹ë»$õÈÿÓù	9
7ÉjšşÙ+ò3"ÁAlë´Ê3@­¦¥ÖÌ"†¬Mµ”´†j/ˆ€‘z^éÈ?ª¼FıØ|&Ü×s	È¡«™~‘]¤*Vôšl0¨Å=–É“î65-“"şíæÒ· ƒÓ«e°5)dİ60}cè¤®¡éŒ¾è­$¯”ÕÜF2”äÓ‹º¯=ïpãÒ¥Qôƒ%¨E¨>·aÀ‚Jl¿}eÄY˜¼&•‚ëÒvˆ-µ¥%xëÜĞúIêĞ_¸©Ï¨Ìx-pªhˆÆ›Šâj”rt ´ÇŠ€iy7tZõN³SBŞ#Ñ(O@L’ ”s£1+@ÙY$Ómb„ŸI1±PşeŒUMx­î2ŒYùt)Z# Óä¥ÛˆÓô 'şúeˆBÉZüR…YáF“ §k@LoÉÜˆ1ÆkëM5äH‘<èÊ£ÜT\: †6Î§m˜ĞÓ®;UrHñ1Š@ËÓA©ÍÖâI‡E†(ÖYDÏKñf’nT'º>t‰(c(^ÔzG*JïÒ6ŞÈ:G%‹§ÚˆtÕ—x™zÚÓI(([1´V“ê2HHë¢¿œm>™eH–ñÒÂáÍ(É6	E¬PcŸŠÄ“1Ù3âE8ø‡‚A,š7Èv,N¨£“š~Â]«B6Z!‰)Õ¥ßú¿¶Šc*WïvÅJÕå'×úWdµ)(;¿F×*£"(“‰&cÓ6•¸qXÊøû­ë5úÃJ8B`Õ^K¬&DZ)x„@9—*ŠÑ©"e1|ûlZ²E‹+B½Ë#bigs ä²Òo:IUÀñ_)ÒƒN	KÁÍ‘LzÂ‡Î4ëèä:&Ö#qú+»¾ëƒˆ(ş‚3ê*`$˜‹!¬C£ŒÈ#î>EHIa˜…âÏÂÕ.b}™ 8?ı¦ØEnÊ‘ñ&WKp‰e­ùË¶®V™å^íWûøºêsµ©„r¦ÕÍ†áûôr¦\Br$É³Š™û*	V5¿yd©%AOsSÊãÀ³PlãtfµÑ¢âšH)*#¤Q¸—[%\|T†yâñölı˜fP!Æ\0«Ş%ï5çâz™¼N¡ÈÔ:»8«¼Ú‘Úµ’BJt5(¸Ë—WW§|ÇoziVÔëœ!NÖY‘Éå¼`W!‘u°ÖÖSÇğ«;RSÓçôR- ¼ËÑÏ¸–*J÷(ÂêäW›‚K„ÓÔIAV¯˜¿
€©ıˆ´U¼Æò0\}İ Pağ’İVë¶‹QL=Õ‰]:M=ÅU%«ÈdÊWP`¨ŠøB`O3_wĞßI§ÔePúâõãÒbZ†`}N–¢s$±ëZ3¶ÑY&C) DÜõ€W¿<¨Ò•§w¬§ÓÕ!bº ´şZ6Áú ë¨^1Ssı–IcT«ñ±ò zåÈğ9«vJ)øS4ÃrùUÛ€RN¡z3ÚÊ*?µP¦A¢Z“õùÆÑlK#bt“3·9Å5	ß>®¿lœß%)	%z7_Ù.—ƒ›cÛÈFMXkÒ^
Ôsi¯]T\ÌJ%hÂ?¸2§è*W.‡ğJTÓ)gWSZ—¼„¡&´¾Áa“Áße*š›Â¡~ÒÊ1˜ÈI’‹MÑwÙşÛ’¶/^„ğ¾ZMürBªÈ£ŸüBµúå“$[‘~¤„—'‹÷ë·÷­ƒĞº’%h¨|H¹YÅëû¦)?0ûƒU  ¤"E)¾`ÈÀ“Õeº¸os3ÙímHİ6w<YŒb²‘+öWÉvª€lÑ€¹Y9²±6W¸hMgÅf™_å÷û7àå šÍL¥ËcúØ>¢ê™›Ùìcø7Ù-Š 5ğNÚ­°še+›9ÃŸ×€U4~¸­»›E›E§µ£×!˜ÛR2³Ñî*ÜÌêF4
šÁk2+X¯nJëææ4+²ìÙ8É^ÃáV „y êQ«${N³Jj’›lc…‚èhŒİš±¬½NàíQ‚â-dkŞ´ÜåeŞñ”İİÌJC(Z ÒÄZ5˜¬f“DÉ¼19†$u˜%5Ü­ØDõ¼@Çb+Û¸{û»ÛÖ¨åu)Šé‰mV®Ÿ™L¦÷ß~J¶"ÃÎÛœDÛ¨•îÀú¤«³º…W%,ºwÛ“¡ª±Å­N„G–>Ó]‡ÇÂ´ +-1x*VBw 'yšÏkÙCëÊÔò®º&œ¸÷ ji¢…|pNÎÕÕüxL];W7Ë*˜»Î;à¹«™ÎµÂeèC”9¶ÁÃŸ™~âÌ1ƒ-Q{¼-¹dK€ÆŒ]PNTŞéø© ß¨àeY„X- 1¢‚‘òÎ‰âï×û0îğ‚U\PZyˆE'Øœ˜Š5lÛ/1µh_à~V‚9¡æJÈLc#aˆÂ~›1‚Ç¤şòB6<tZ`ÃÖ	Lqªˆ¯Q>˜a5jğ$€ÊÈá‰Âƒì˜à¼â &œ„ğbh«o~†°lm$èùƒCı–y)¾ÇÙuaPf:¤Ñ©æ÷ª–Œ`U½ ]¸`ÃAM°¡ĞæI§m]í8uoŞ¯ºßÒ×àæ%TÙ§(Óuí6ÌñàLJ¬~ñ²(«oşJUÃ­ xˆ~•Æ-ÔÆ8umÈÀ¹?O-ùË„Xv½ûPÆ)Í’iu@<  Š©ÿ½/¶ìõÛõRBğRwgŞ‡kv"òÿ@Ù–Š-ã`‚Ö+G¦'
•mY.~ª"¤N~yuIJĞ•¨[hòSæúX¶˜fºï"
u^şÕ
éj*¬ÌTÅ„wma%B¨òù5Ç–]‡OµƒºÀjSªFeyËÜûÕÏß?
ëõÂ ‚PŠèz€fÕc¨,ß¶âGJh	JÙ“ùËæÛR¤åuv!:z¼¥2«¼¿ùD´´€:ğmC¨&S~²ùkÔ‹Bu„÷JªNmĞŠ!Õ*†T+XhY¨ÖÕõ;”Bm¨À`—ÖÊŞ/8ëÉ×©˜Ğ˜F/Õvî)WÚ•ÁÔœæL­ºßØ¤½'U@Y†jK‡è”ì÷ú(‡ş%øøhR7;µ§@Äm9SËm^A-hPÒ—Ú3”Kç4öv2¾…úƒûšßaÚô-¡9µ5@Èë<h„lvZÍ¯~‚I	iqÒµ…sï%C*GmëTúg*ïWÛÔ¾Au¬á»°ö«=Şäh¿§êÜ•—f‰Ô0U§õ¢ÒhMEğïj”9LºJ	-D GÑ§5+êZ.pÖF	†(Šê©ÿ7¸ÚcõhëõïõêCs@íÉFU¨~Oñ´¡Íàˆ¯0…Çg£ev†Ñ¾(¶½£`³ÕEòi#ñtiÚèÖªı`QÚz{ÂRïât(¶’Bê6y79¡]YsØ´k¬¶É÷<Kîr* kÅú·o\¶Ù0ImÊ(—êŒ
š„QH¾.³'Òõ¦põÓm
èzº¤Î-ò!Ó.CEc›óSÚvAïgˆ#‚%ƒ6İKcsù+ÃvŒaÆ$…\¥|Ş@eá­¼hãOG<ytX\ HïV ,œ)ïY¥e(Ega´%@ğ1ÖK¤9†+0¸mĞt()tD.ê£ßL‡å=[ĞÎèôJjÌû@Mÿ¶×Ã„+\†J
TÌ€Ş%×/ß"€/dêõzÿ^F?å ¶„j
(ED–åk´>µJ©{ß®Ã(²Tk½\€1rC5Qè°ƒê®Ÿ§Ô¾…:#
¦³èïø·Î¤Ù™iQ]Q,tĞß	†ltğAÇúƒra]UgñÓ¡¶?µ…
fãiH}‘¦gR¾yA>	)úı>\Xßy}A3.QCÚE%2 ÈLz